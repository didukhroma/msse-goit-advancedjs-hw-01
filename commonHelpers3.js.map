{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["// Import\nimport throttle from 'lodash.throttle';\n\n// Constants\nconst localStorageKey = 'feedback-form-state';\n// Reference\nconst formRef = document.querySelector('.feedback-form');\n// Base Form State\nconst baseFormState = { email: '', message: '' };\n\n// Set data to local storage\nconst setLocalStorageData = data => {\n  const json = JSON.stringify(data);\n  localStorage.setItem(localStorageKey, json);\n};\n\n//Get data from local storage\nconst getLocalStorageData = () => {\n  let result = '';\n  try {\n    result = JSON.parse(localStorage.getItem(localStorageKey));\n  } catch (error) {\n    console.log(error.message);\n    return;\n  }\n  return result;\n};\n\n// Handler for input event\nconst handleInput = ({ target: { name, value } }) => {\n  formState[name] = value;\n  setLocalStorageData(formState);\n};\n\n// Handler for submit event\nconst handleSubmit = e => {\n  //default behavior\n  e.preventDefault();\n  //current formState\n  console.log(formState);\n  // clear input\n  [...e.target.elements].forEach(\n    el => el.nodeName !== 'BUTTON' && (el.value = '')\n  );\n  //Clear localStorage\n  setLocalStorageData(baseFormState);\n  //Clear Form State\n  Object.keys(formState).forEach(el => (formState[el] = ''));\n};\n\n//Get first data\nconst firstData = getLocalStorageData();\n\n// Form State\nconst formState = firstData\n  ? { ...baseFormState, ...firstData }\n  : { ...baseFormState };\n\n//Set data form local storage to form after reload page\nObject.keys(formState).forEach(el => (formRef[el].value = formState[el]));\n\n// Event listeners\nformRef.addEventListener('input', throttle(handleInput, 1500));\nformRef.addEventListener('submit', handleSubmit);\n"],"names":["localStorageKey","formRef","baseFormState","setLocalStorageData","data","json","getLocalStorageData","result","error","handleInput","name","value","formState","handleSubmit","e","el","firstData","throttle"],"mappings":"mIAIA,MAAMA,EAAkB,sBAElBC,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAgB,CAAE,MAAO,GAAI,QAAS,EAAE,EAGxCC,EAAsBC,GAAQ,CAClC,MAAMC,EAAO,KAAK,UAAUD,CAAI,EAChC,aAAa,QAAQJ,EAAiBK,CAAI,CAC5C,EAGMC,EAAsB,IAAM,CAChC,IAAIC,EAAS,GACb,GAAI,CACFA,EAAS,KAAK,MAAM,aAAa,QAAQP,CAAe,CAAC,CAC1D,OAAQQ,EAAP,CACA,QAAQ,IAAIA,EAAM,OAAO,EACzB,MACD,CACD,OAAOD,CACT,EAGME,EAAc,CAAC,CAAE,OAAQ,CAAE,KAAAC,EAAM,MAAAC,CAAO,CAAA,IAAO,CACnDC,EAAUF,GAAQC,EAClBR,EAAoBS,CAAS,CAC/B,EAGMC,EAAeC,GAAK,CAExBA,EAAE,eAAc,EAEhB,QAAQ,IAAIF,CAAS,EAErB,CAAC,GAAGE,EAAE,OAAO,QAAQ,EAAE,QACrBC,GAAMA,EAAG,WAAa,WAAaA,EAAG,MAAQ,GAClD,EAEEZ,EAAoBD,CAAa,EAEjC,OAAO,KAAKU,CAAS,EAAE,QAAQG,GAAOH,EAAUG,GAAM,EAAG,CAC3D,EAGMC,EAAYV,EAAmB,EAG/BM,EAAYI,EACd,CAAE,GAAGd,EAAe,GAAGc,CAAW,EAClC,CAAE,GAAGd,CAAa,EAGtB,OAAO,KAAKU,CAAS,EAAE,QAAQG,GAAOd,EAAQc,GAAI,MAAQH,EAAUG,EAAI,EAGxEd,EAAQ,iBAAiB,QAASgB,EAASR,EAAa,IAAI,CAAC,EAC7DR,EAAQ,iBAAiB,SAAUY,CAAY"}