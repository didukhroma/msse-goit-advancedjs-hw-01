{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["// Import\nimport throttle from 'lodash.throttle';\n\n// Constants\nconst localStorageKey = 'feedback-form-state';\n// Reference\nconst formRef = document.querySelector('.feedback-form');\n// Base Form State\nconst baseFormState = { email: '', message: '' };\n\n// Set data to local storage\nconst setLocalStorageData = data => {\n  let json = '';\n  try {\n    json = JSON.stringify(data);\n  } catch (error) {\n    console.log(error.message);\n    return;\n  }\n  localStorage.setItem(localStorageKey, json);\n};\n\n//Get data from local storage\nconst getLocalStorageData = () =>\n  JSON.parse(localStorage.getItem(localStorageKey));\n\n// Handler for input event\nconst handleInput = ({ target: { name, value } }) => {\n  formState[name] = value;\n  setLocalStorageData(formState);\n};\n\n// Handler for submit event\nconst handleSubmit = e => {\n  //default behavior\n  e.preventDefault();\n  //current formState\n  console.log(formState);\n  // clear input\n  [...e.target.elements].forEach(\n    el => el.nodeName !== 'BUTTON' && (el.value = '')\n  );\n  //Clear localStorage\n  setLocalStorageData(baseFormState);\n  //Clear Form State\n  Object.keys(formState).forEach(el => (formState[el] = ''));\n};\n\n//Get first data\nconst firstData = getLocalStorageData();\n\n// Form State\nconst formState = firstData\n  ? { ...baseFormState, ...firstData }\n  : { ...baseFormState };\n\n//Set data form local storage to form after reload page\nObject.keys(formState).forEach(el => (formRef[el].value = formState[el]));\n\n// Event listeners\nformRef.addEventListener('input', throttle(handleInput, 500));\nformRef.addEventListener('submit', handleSubmit);\n"],"names":["localStorageKey","formRef","baseFormState","setLocalStorageData","data","json","error","getLocalStorageData","handleInput","name","value","formState","handleSubmit","e","el","firstData","throttle"],"mappings":"wIAIA,MAAMA,EAAkB,sBAElBC,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAgB,CAAE,MAAO,GAAI,QAAS,EAAE,EAGxCC,EAAsBC,GAAQ,CAClC,IAAIC,EAAO,GACX,GAAI,CACFA,EAAO,KAAK,UAAUD,CAAI,CAC3B,OAAQE,EAAP,CACA,QAAQ,IAAIA,EAAM,OAAO,EACzB,MACD,CACD,aAAa,QAAQN,EAAiBK,CAAI,CAC5C,EAGME,EAAsB,IAC1B,KAAK,MAAM,aAAa,QAAQP,CAAe,CAAC,EAG5CQ,EAAc,CAAC,CAAE,OAAQ,CAAE,KAAAC,EAAM,MAAAC,CAAO,CAAA,IAAO,CACnDC,EAAUF,GAAQC,EAClBP,EAAoBQ,CAAS,CAC/B,EAGMC,EAAeC,GAAK,CAExBA,EAAE,eAAc,EAEhB,QAAQ,IAAIF,CAAS,EAErB,CAAC,GAAGE,EAAE,OAAO,QAAQ,EAAE,QACrBC,GAAMA,EAAG,WAAa,WAAaA,EAAG,MAAQ,GAClD,EAEEX,EAAoBD,CAAa,EAEjC,OAAO,KAAKS,CAAS,EAAE,QAAQG,GAAOH,EAAUG,GAAM,EAAG,CAC3D,EAGMC,EAAYR,EAAmB,EAG/BI,EAAYI,EACd,CAAE,GAAGb,EAAe,GAAGa,CAAW,EAClC,CAAE,GAAGb,CAAa,EAGtB,OAAO,KAAKS,CAAS,EAAE,QAAQG,GAAOb,EAAQa,GAAI,MAAQH,EAAUG,EAAI,EAGxEb,EAAQ,iBAAiB,QAASe,EAASR,EAAa,GAAG,CAAC,EAC5DP,EAAQ,iBAAiB,SAAUW,CAAY"}